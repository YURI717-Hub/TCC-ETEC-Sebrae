<!DOCTYPE html>
<html lang="pt-br">

<head>

  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Bem Vindo - Auto Peças Express</title>
  <link rel="stylesheet" href="../css/cad-e-login.css">
  <link rel="stylesheet" href="../css/headerfooter.css">
  <script src="../js/menu.js"></script>

</head>

<body>
  <header>
  <div class="navbar">

    <div class="header-linear-content">

      <a href="../../home.html">
        <h1 class="logo"> AutoPeças <span> Express </span></h1>
      </a>

      <nav>
        <ul>
          <li><a href="perfil.html">Meu Perfil</a></li>
          <li><a href="produto.html">Produtos</a></li>
          <li><a href="sobre.html">Sobre</a></li>
        </ul>
      </nav>

      

      <!-- NOVO AGRUPAMENTO FLEX PARA CARRINHO + LOGIN + MENU -->
      <div class="right-items">

        <figure class="nav-icon-container">
          <a href="carrinho.html">
            <img src="../images/carrinho.png" alt="">
          </a>
        </figure>

        <ul class="login">
          <li><a href="login.html">Entrar</a></li>
          <li>|</li>
          <li><a href="cadastro.html">Cadastro</a></li>
        </ul>

        <figure>
          <img onload="menu();" src="../images/menu.png" alt="" class="menu-button">
        </figure>

      </div>

    </div>

  </div>
</header>
<br><br><br>
  <main>
    <section class="login-informacoes">
      <div class="login-superior">
        <i class="fa fa-user icone-usuario"></i>
        <h2>Fazer login</h2>
      </div>

      <form class="login-form" action="#" method="post">
        <label for="email">Email</label>
        <input type="email" id="email" name="email" required />

        <label for="senha">Senha</label>
        <input type="password" id="senha" name="senha" required />

        <div class="form-opcoes">
          <label><input type="checkbox" name="lembrar" /> Lembrar-me</label>
          <a href="#">Esqueci minha senha</a>
        </div>

        <input type="submit" value="Entrar" />
      </form>

      <div class="opcao-cadastro">
        <p>Não tem uma conta? <a href="cadastro.html">Cadastrar-se</a></p>

      </div>
    </section>







  </main>


  <script type="module">
    import {
        auth,
        signInWithEmailAndPassword
    } from "../js/firebaseConfig.js";
    
    import { onAuthStateChanged }
        from "https://www.gstatic.com/firebasejs/10.12.2/firebase-auth.js";
    
    // =======================================
    // 0️⃣ SE JÁ ESTIVER LOGADO → IR PARA PRODUTOS
    // =======================================
    onAuthStateChanged(auth, (user) => {
        if (user) {
            window.location.href = "produto.html";
        }
    });
    
    // =======================================
    // LOGIN NORMAL
    // =======================================
    document.querySelector(".login-form").addEventListener("submit", async (e) => {
        e.preventDefault();
    
        const email = document.getElementById("email").value.trim();
        const senha = document.getElementById("senha").value;
    
        try {
            // 1️⃣ Tentar fazer login diretamente
            await signInWithEmailAndPassword(auth, email, senha);
    
            // 2️⃣ Login OK → redirecionar
            alert("Login realizado com sucesso!");
            window.location.href = "produto.html";
    
        } catch (error) {
    
            // 3️⃣ Usuário digitou email correto, mas senha errada
            if (error.code === "auth/invalid-credential") {
                alert("Senha incorreta!");
                return;
            }
    
            // 4️⃣ Usuário não existe
            if (error.code === "auth/user-not-found") {
                alert("Usuário não encontrado. Crie uma conta.");
                window.location.href = "cadastro.html";
                return;
            }
    
            // 5️⃣ Outros erros
            console.log(error);
            alert("Erro ao fazer login: " + error.message);
        }
    });
    </script>
    
    
    

  <footer>
    <div class="footer-superior-completa">
        <div class="footer-superior-esquerdo">
            <h4 class="footer-topico">Institucional</h4>
            <ul class="sub-topicos">
                <li><a href="./assets/pages/sobre.html">Sobre a empresa</a></li>
                <li><a href="./assets/pages/lgpd.html">Política de Privacidade</a></li>
                <li><a href="">Termos de Uso</a></li>
            </ul>
        </div>

        <div class="footer-superior-meio">
            <h4 class="footer-topico">Ajuda</h4>
            <ul class="sub-topicos">
                <li><a href="">Fale Conosco/Suporte</a></li>
                <li><a href="">Trocas e Devoluções</a></li>
                <li><a href="">Formas de Pagamento</a></li>
                <li><a href="">Prazo de Entrega</a></li>
            </ul>
        </div>

        <div class="footer-superior-direito">
            <h4 class="footer-topico">Contato</h4>
            <ul class="lista-contato">
                <li>Telefone: (11) 99999-9999</li>
                <li>Email: contato@autoexpress.com.br</li>
                <li>Horário: Seg a Sex, das 8h às 18h</li>
            </ul>
        </div>
    </div>

    <hr class="footer-divisao" />

    <div class="footer-inferior-completa">
        <div class="footer-inferior-esquerdo">
            <h4 class="footer-topico">Meios de pagamento:</h4>
            <figure class="image-pag">
                <img src="https://img.icons8.com/color/48/000000/visa.png" alt="Visa" />
                <img src="https://img.icons8.com/color/48/000000/mastercard.png" alt="Mastercard" />
                <img src="https://img.icons8.com/fluency/48/pix.png" alt="Pix" />
            </figure>
        </div>

        <div class="footer-inferior-direito">
            <h4 class="footer-topico">Redes Sociais</h4>
            <figure class="image-rede-sociais">
                <img src="../images/logo-facebook.png" alt="facebook-logo">
                <img src="../images/logo-instagram.png" alt="instagram-logo">
                <img src="../images/logo-whatsapp.png" alt="whatsapp-logo">
            </figure>
        </div>
    </div>

    <div class="footer-creditos">
        <p>Creditos</p>
    </div>
</footer>
</body>